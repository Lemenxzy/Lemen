$(function(){var topmenu=$("#fixmenu");var topmenu_top=topmenu.offset().top;$(window).scroll(function(){reset_topmenu_top(topmenu,topmenu_top)})});function reset_topmenu_top(topmenu,topmenu_top){var document_scroll_top=$(document).scrollTop();if(document_scroll_top>topmenu_top){topmenu.addClass("navbar-fixed-top");$("#top").fadeIn("slow")}else{topmenu.removeClass("navbar-fixed-top");$("#top").stop(true,true).fadeOut("slow")}}$("#top").on("click touchmove",function(){$("html,body").animate({scrollTop:0},"slow")});$(".scrollLoading").scrollLoading();$(function(){var msrc=$("#musicsrc").data("src");var musics=[];var name=[];var src=[];musics=msrc.split("#");for(i=0;i<musics.length;i++){if(i%2==0){name.push(musics[i])}}for(i=0;i<musics.length;i++){if(i%2!=0){src.push(musics[i])}}var index=0;var playadudio=document.getElementById("audiomp3");var showdom=$("#show");var voidbt=$("#voidprogress");playadudio.src=src[index];playadudio.preload="auto";playadudio.play();$("#songname").html(name[index]);drag($("#music_btn"),playadudio.durationchange=function(zw,tw){var per=zw/tw;var ctime=playadudio.duration*per;playadudio.currentTime=ctime},playadudio.durationchange=function(zw,tw){var per=zw/tw;var ctime=playadudio.duration*per;playadudio.currentTime=ctime});drag($("#void_btn"),function(zw,tw){var per=zw/tw;voidbt.children(".void_bar").css("width",per*100+"%");voidbt.children("#void_btn").css("left",per*100+"%");playadudio.volume=per},function(zw,tw){var per=zw/tw;voidbt.children(".void_bar").css("width",per*100+"%");voidbt.children("#void_btn").css("left",per*100+"%");playadudio.volume=per});$("#pause").on("click touchmove",function(){var $this=$("#pause");if($this.hasClass("glyphicon-pause")){$this.removeClass("glyphicon-pause");$this.addClass("glyphicon-play");playadudio.pause();$("#musicbg").css("animation-play-state","paused")}else{$this.removeClass("glyphicon-play");$this.addClass("glyphicon-pause");playadudio.play();$("#musicbg").css("animation-play-state","running")}});$("#volume").on("click touchmove",function(){var $this=$("#volume");if($this.hasClass("glyphicon-volume-up")){$this.removeClass("glyphicon-volume-up");$this.addClass("glyphicon-volume-off");playadudio.volume=0}else{$this.removeClass("glyphicon-volume-off");$this.addClass("glyphicon-volume-up");playadudio.volume=1}});$("#last").on("click touchmove",function(){index=index-1;if(index<=0){index=0}playadudio.pause();playadudio.src=src[index];playadudio.play();$("#songname").html(name[index]);playcss($("#pause"),"glyphicon-play","glyphicon-pause","running")});$("#next").on("click touchmove",function(){index=index+1;if(index>=name.length){index=name.length-1}playadudio.pause();playadudio.src=src[index];playadudio.play();$("#songname").html(name[index]);playcss($("#pause"),"glyphicon-play","glyphicon-pause","running")});playadudio.ontimeupdate=function(){var ctime=playadudio.currentTime;var ttime=playadudio.duration;showdom.children("#ttime").html(getTime(ttime));if(ctime!=ttime){showdom.children("#ctime").html(getTime(ctime));var percent=((ctime/ttime)*94)+"%";$("#jindu").css("width",percent);$("#music_btn").css("left",percent)}else{++index;if(index>=src.length){index=0}playadudio.src=src[index];$("#songname").html(name[index]);playadudio.play()}}});function drag(dom,callback,callback2){var pdom=dom.parents();dom.mousedown(function(e){var fl=true;var ev=e||window.event;var x=ev.clientX;var l=dom.position().left;var mw=pdom.width()-dom.width();tm_forbiddenSelect();$(document).mousemove(function(e){if(fl){var ev=e||window.event;var n1=ev.clientX-x+l;if(n1<0){n1=0}if(n1>mw){n1=mw}dom.css("left",n1+"px");if(callback){callback.call(dom,n1,mw)}}}).mouseup(function(){fl=false;tm_autoSelect()})});dom.next().mousedown(function(e){var ev=e||window.event;var x=ev.clientX;var juli=x-pdom.offset().left;if(callback2){callback2.call(dom.next(),juli,pdom.width())}})}function tm_forbiddenSelect(){$(document).bind("selectstart",function(){return false});document.onselectstart=new Function("event.returnValue=false;");$("*").css({"-moz-user-select":"none"})}function tm_autoSelect(){$(document).bind("selectstart",function(){return true});document.onselectstart=new Function("event.returnValue=true;");$("*").css({"-moz-user-select":""})}function getTime(timer){var m=parseInt(timer/60);var s=parseInt(timer%60);m=m<10?"0"+m:m;s=s<10?"0"+s:s;return m+":"+s}function playcss(dom,css,css2,run){var $this=dom;if($this.hasClass(css)){$this.removeClass(css);$this.addClass(css2);$("#musicbg").css("animation-play-state",run)}};