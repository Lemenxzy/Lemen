var flag1=false;var flag2=false;var flag3=false;var flag4=false;function chkvalue(){var em=$("#email").val();if(isProperLen(em)){if(isEmail(em)){$.ajax({type:"post",url:basePath+"/server/regyanzheng.jsp",data:{"email":em},success:function(data){data=data.trim();if(data=="success"){$("#eml").html("<span class='glyphicon glyphicon-ok' style='color:#25FFA4'></span> OK");$("#eml").css({color:"#fff"});flag1=true}else{if(data=="fail"){$("#eml").html("<span class='glyphicon glyphicon-remove' style='color:#FF3B25'></span> 该邮箱已经被使用");$("#eml").css({color:"#FF3B25"});flag1=false}else{$("#eml").html("<span class='glyphicon glyphicon-remove' style='color:#FF3B25'></span> 邮箱不能为空");$("#eml").css({color:"#FF3B25"});flag1=false}}}})}else{$("#eml").html("<span class='glyphicon glyphicon-remove' style='color:#FF3B25'></span> 邮箱格式不正确");$("#eml").css({color:"#FF3B25"});flag1=false}}else{$("#eml").html("<span class='glyphicon glyphicon-remove' style='color:#FF3B25'></span> 6-32位的邮箱账号");$("#eml").css({color:"#FF3B25"});flag1=false}}function usname(){var uname=$("#username").val();if(isEmpty(uname)){$("#usn").html("<span class='glyphicon glyphicon-remove' style='color:#FF3B25'></span> 昵称不能为空");$("#usn").css({color:"#FF3B25"});flag2=false}else{$.ajax({type:"post",url:basePath+"/server/yanzhenguname.jsp",data:{"uname":uname},success:function(data){data=data.trim();if(data=="success"){$("#usn").html("<span class='glyphicon glyphicon-ok' style='color:#25FFA4'></span> OK");$("#usn").css({color:"#fff"});flag2=true}else{if(data=="fail"){$("#usn").html("<span class='glyphicon glyphicon-remove' style='color:#FF3B25'></span> 该昵称已被使用");$("#usn").css({color:"#FF3B25"});flag2=false}else{$("#usn").html("<span class='glyphicon glyphicon-remove' style='color:#FF3B25'></span> 昵称不能为空");$("#usn").css({color:"#FF3B25"});flag2=false}}}})}}function passworduser(){var password=$("#password").val();if(isProperLen(password)){$("#pass").html("<span class='glyphicon glyphicon-ok' style='color:#25FFA4'></span> OK");$("#pass").css({color:"#fff"});flag3=true}else{$("#pass").html("<span class='glyphicon glyphicon-remove' style='color:#FF3B25'></span> 6-32位的密码");$("#pass").css({color:"#FF3B25"});flag3=false}}function yzpw(){var password=$("#password").val();var agpassword=$("#agpassword").val();if(isProperLen(password)){if(password!=agpassword){$("#agpass").html("<span class='glyphicon glyphicon-remove' style='color:#FF3B25'></span> 两次密码输入不一致");$("#agpass").css({color:"#FF3B25"});flag4=false}else{$("#agpass").html("<span class='glyphicon glyphicon-ok' style='color:#25FFA4'></span> OK");$("#agpass").css({color:"#fff"});flag4=true}}else{$("#agpass").html("<span class='glyphicon glyphicon-remove' style='color:#FF3B25'></span> 6-32位的密码");$("#agpass").css({color:"#FF3B25"});flag4=false}}function myFun(sId){var oImg=document.getElementById("himg").getElementsByTagName("img");for(var i=0;i<oImg.length;i++){if(oImg[i].id==sId){oImg[i].previousSibling.previousSibling.checked=true;oImg[i].style.border="4px solid #F5221B"}else{oImg[i].style.border="4px solid #ccc"}}}function regbtn(){var w=$(window).width();var userimg=$("input:radio:checked").val();var email=$("#email").val();var username=$("#username").val();var password=$("#password").val();var agpassword=$("#agpassword").val();if(flag1&&flag2&&flag3&&flag4){$.ajax({type:"post",url:basePath+"/server/regdata.jsp",data:{"username":username,"password":password,"email":email,"userimg":userimg},success:function(data){data=data.trim();if(data=="null"){$("#test").html("亲，头像忘记选了哦！");var wid1=$("#test").width();$("#test").animate({left:((w/2)-(wid1/2))+"px"},"slow");return false}else{if(data=="success"){window.location.href=basePath+"/login.jsp"}else{$("#test").html("对不起注册失败");var wid2=$("#test").width();$("#test").animate({left:((w/2)-(wid2/2))+"px"},"slow");return false}}}})}else{$("#test").html("亲，请按要求信息!");var wid=$("#test").width();$("#test").animate({left:((w/2)-(wid/2))+"px"},"slow");return false}}$($("body").keydown(function(){if(event.keyCode=="13"){$("#btnSumit").click()}}));